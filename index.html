<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Trello Export Power-Up</title>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
</head>
<body>
  <script>
    var CAPABILITY_NAMES = {
      'board-buttons': function(t, options) {
        return [{
          icon: {
            dark: 'https://rkwm713.github.io/ServOS-Export/icon.png',
            light: 'https://rkwm713.github.io/ServOS-Export/icon.png'
          },
          text: 'Export Cards',
          callback: function(t) {
            return t.popup({
              title: 'Export Cards Data',
              url: './export.html',
              height: 400
            });
          }
        }];
      }
    };

    TrelloPowerUp.initialize({
      // Start with the basic capabilities your Power-Up needs
      'board-buttons': CAPABILITY_NAMES['board-buttons'],
      'card-buttons': function(t, options) {
        return [];
      },
      'card-badges': function(t, options) {
        return [];
      },
      'card-detail-badges': function(t, options) {
        return [];
      },
      'show-settings': function(t, options) {
        return t.popup({
          title: 'Settings',
          url: './settings.html',
          height: 184
        });
      }
    }, {
      // Additional initialization options
      appKey: 'your-app-key-here', // Replace with your actual app key
      appName: 'Export Cards Power-Up',
      apiEndpoint: 'https://api.trello.com',
      authEndpoint: 'https://trello.com',
      requestWithContext: function(t, opts) {
        return t.arg('member', 'id')
          .then(function(memberId) {
            return opts.url;
          });
      }
    });
  </script>
</body>
</html>
